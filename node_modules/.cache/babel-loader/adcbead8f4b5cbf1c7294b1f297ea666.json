{"remainingRequest":"E:\\OMROM\\A6\\AleBrush\\node_modules\\babel-loader\\lib\\index.js!E:\\OMROM\\A6\\AleBrush\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\OMROM\\A6\\AleBrush\\src\\mixins\\bleConnect.js","dependencies":[{"path":"E:\\OMROM\\A6\\AleBrush\\src\\mixins\\bleConnect.js","mtime":1616635535199},{"path":"E:\\OMROM\\A6\\AleBrush\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\OMROM\\A6\\AleBrush\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\OMROM\\A6\\AleBrush\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkU6L09NUk9NL0E2L0FsZUJydXNoL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKCi8qDQogKiBAQXV0aG9yOiB5b3VyIG5hbWUNCiAqIEBEYXRlOiAyMDIxLTAyLTA0IDE0OjEzOjI5DQogKiBATGFzdEVkaXRUaW1lOiAyMDIxLTAzLTIzIDE1OjE0OjUxDQogKiBATGFzdEVkaXRvcnM6IFBsZWFzZSBzZXQgTGFzdEVkaXRvcnMNCiAqIEBEZXNjcmlwdGlvbjogSW4gVXNlciBTZXR0aW5ncyBFZGl0DQogKiBARmlsZVBhdGg6IFxicm9vZC1wcmVzc3VyZS1kZW1vXHNyY1xtaXhpbnNcYmxlQ29ubmVjdC5qcw0KICovCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGcgZnJvbSAnLi4vdXRpbHMvaW5kZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRldmljZUlkOiBudWxsLAogICAgICBzZXJ2aWNlSWQ6ICIwMDAwZmZiMC0wMDAwLTEwMDAtODAwMC0wMDgwNWY5YjM0ZmIiLAogICAgICB3cml0ZUNoYXJhY3RlcmlzdGljSWQ6ICIwMDAwZmZiMS0wMDAwLTEwMDAtODAwMC0wMDgwNWY5YjM0ZmIiLAogICAgICByZWFkQ2hhcmFjdGVyaXN0aWNJZDogIjAwMDBmZmIyLTAwMDAtMTAwMC04MDAwLTAwODA1ZjliMzRmYiIsCiAgICAgIGJsZUNvbm5lY3RlZDogJycsCiAgICAgIGhpc3RvcnlMb2c6ICcnLAogICAgICBpbml0R2V0RGF0YTU4OiB0cnVlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMub25CTEVDb25uZWN0aW9uU3RhdGVDaGFuZ2UoKTsKICAgIHRoaXMub25CbHVldG9vdGhBZGFwdGVyU3RhdGVDaGFuZ2UoKTsKICAgIHRoaXMuZ2V0Qmx1ZXRvb3RoQWRhcHRlclN0YXRlKCk7CiAgICB0aGlzLm9wZW5CbHVldG9vdGhBZGFwdGVyKCk7CiAgfSwKICBjb21wdXRlZDogewogICAgY29ubmVjdGVkOiBmdW5jdGlvbiBjb25uZWN0ZWQoKSB7CiAgICAgIC8v5bey6L+e5o6lCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5CbGVTdGF0dXMuYmxlQ29ubmVjdGVkOwogICAgfQogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKHsKICAgIGNhbGxfdXBkYXRlX2JsZUNvbm5lY3RlZDogJ2NhbGxfdXBkYXRlX2JsZUNvbm5lY3RlZCcKICB9KSksIHt9LCB7CiAgICAvKioNCiAgICAgICogQGRlc2NyaXB0aW9uOiDok53niZnov57mjqXnrKzkuIDmraUg6I635Y+W6K6+5aSH6JOd54mZ5qih5Z2X54q25oCBDQogICAgICAqIEBwYXJhbSB7Kn0NCiAgICAgICogQHJldHVybiB7Kn0NCiAgICAgICovCiAgICBnZXRCbHVldG9vdGhBZGFwdGVyU3RhdGU6IGZ1bmN0aW9uIGdldEJsdWV0b290aEFkYXB0ZXJTdGF0ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5nZXRCbHVldG9vdGhBZGFwdGVyU3RhdGUgJiYgd2luZG93LmhpbGluay5nZXRCbHVldG9vdGhBZGFwdGVyU3RhdGUoImdldEJsdWV0b290aEFkYXB0ZXJTdGF0ZUNhbGxiYWNrIik7CgogICAgICB3aW5kb3cuZ2V0Qmx1ZXRvb3RoQWRhcHRlclN0YXRlQ2FsbGJhY2sgPSBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHJlcyk7CgogICAgICAgIGlmIChkYXRhLmF2YWlsYWJsZSkgewogICAgICAgICAgY29uc29sZS5sb2coZGF0YS5hdmFpbGFibGUpOwoKICAgICAgICAgIF90aGlzLmdldEN1cnJlbnRSZWdpc3RlcmVkRGV2aWNlKCk7CgogICAgICAgICAgX3RoaXMuc2VhcmNoRGV2aWNlcygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnNTU1Jyk7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb246IOaJk+W8gOiTneeJmQ0KICAgICAqIEBwYXJhbSB7Kn0NCiAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAqLwogICAgb3BlbkJsdWV0b290aEFkYXB0ZXI6IGZ1bmN0aW9uIG9wZW5CbHVldG9vdGhBZGFwdGVyKCkgewogICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsub3BlbkJsdWV0b290aEFkYXB0ZXIgJiYgd2luZG93LmhpbGluay5vcGVuQmx1ZXRvb3RoQWRhcHRlcigpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb246IOWOu+azqOWGjOiuvuWkhyDnrKzkuozmraUNCiAgICAgKiBAcGFyYW0geyp9DQogICAgICogQHJldHVybiB7Kn0NCiAgICAgKi8KICAgIGdldEN1cnJlbnRSZWdpc3RlcmVkRGV2aWNlOiBmdW5jdGlvbiBnZXRDdXJyZW50UmVnaXN0ZXJlZERldmljZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvLyDms6jlhozliY3lhYjnm5HlkKzlj5HnjrDorr7lpIcKICAgICAgd2luZG93LmdldEN1cnJlbnRSZWdpc3RlcmVkRGV2aWNlQ2FsbEJhY2sgPSBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZygn5rOo5YaM5YmN5YWI55uR5ZCs5Y+R546w6K6+5aSHJywgcmVzKTsKICAgICAgICB2YXIgZGF0YTsKCiAgICAgICAgaWYgKHdpbmRvdy5pb3MpIHsKICAgICAgICAgIGRhdGEgPSBfdGhpczIuZ2V0SU9TRGV2aWQocmVzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UocmVzKTsKICAgICAgICB9CgogICAgICAgIF90aGlzMi5kZXZpY2VJZCA9IGRhdGEuZGV2aWNlSWQ7CiAgICAgICAgd2luZG93LmRldklkID0gZGF0YS5kZXZpY2VJZDsKICAgICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsuY3JlYXRlQkxFQ29ubmVjdGlvbiAmJiB3aW5kb3cuaGlsaW5rLmNyZWF0ZUJMRUNvbm5lY3Rpb24oX3RoaXMyLmRldmljZUlkKTsKICAgICAgfTsKCiAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5nZXRDdXJyZW50UmVnaXN0ZXJlZERldmljZSAmJiB3aW5kb3cuaGlsaW5rLmdldEN1cnJlbnRSZWdpc3RlcmVkRGV2aWNlKCdnZXRDdXJyZW50UmVnaXN0ZXJlZERldmljZUNhbGxCYWNrJyk7CiAgICB9LAoKICAgIC8qKg0KICAgICAgICAqIEBkZXNjcmlwdGlvbjog55uR5ZCs6L+e5o6l6K6+5aSH57uT5p6cDQogICAgICAgICogQHBhcmFtIHsqfQ0KICAgICAgICAqIEByZXR1cm4geyp9DQogICAgICAgICovCiAgICBvbkJMRUNvbm5lY3Rpb25TdGF0ZUNoYW5nZTogZnVuY3Rpb24gb25CTEVDb25uZWN0aW9uU3RhdGVDaGFuZ2UoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLm9uQkxFQ29ubmVjdGlvblN0YXRlQ2hhbmdlICYmIHdpbmRvdy5oaWxpbmsub25CTEVDb25uZWN0aW9uU3RhdGVDaGFuZ2UoJ29uQkxFQ29ubmVjdGlvblN0YXRlQ2hhbmdlQ2FsbEJhY2snKTsKCiAgICAgIHdpbmRvdy5vbkJMRUNvbm5lY3Rpb25TdGF0ZUNoYW5nZUNhbGxCYWNrID0gZnVuY3Rpb24gKHJlcykgewogICAgICAgIHJlcyA9IEpTT04ucGFyc2UocmVzKTsKCiAgICAgICAgaWYgKHJlcy5jb25uZWN0ZWQpIHsKICAgICAgICAgIF90aGlzMy5jYWxsX3VwZGF0ZV9ibGVDb25uZWN0ZWQodHJ1ZSk7IC8vIOmAmuefpeS4iuWxggoKCiAgICAgICAgICBfdGhpczMub25CTEVTZXJ2aWNlc0Rpc2NvdmVyZWQoKTsgLy/nm5HlkKzkvY7lip/ogJfok53niZnorr7lpIfnmoTnibnlvoHlgLzlj5jljJYKCgogICAgICAgICAgX3RoaXMzLm9uQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNoYW5nZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDov57mjqXkuI3miJDlip8g6YeN5paw6L+e5o6lCiAgICAgICAgICBfdGhpczMuc2VhcmNoRGV2aWNlcygpOwoKICAgICAgICAgIF90aGlzMy5jYWxsX3VwZGF0ZV9ibGVDb25uZWN0ZWQoZmFsc2UpOwogICAgICAgIH0KICAgICAgfTsKICAgIH0sCgogICAgLyoqDQogICAgICAgICogQGRlc2NyaXB0aW9uOiDnm5HlkKzok53niZnmmK/lkKbmiZPlvIANCiAgICAgICAgKiBAcGFyYW0geyp9DQogICAgICAgICogQHJldHVybiB7Kn0NCiAgICAgICAgKi8KICAgIG9uQmx1ZXRvb3RoQWRhcHRlclN0YXRlQ2hhbmdlOiBmdW5jdGlvbiBvbkJsdWV0b290aEFkYXB0ZXJTdGF0ZUNoYW5nZSgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsub25CbHVldG9vdGhBZGFwdGVyU3RhdGVDaGFuZ2UgJiYgd2luZG93LmhpbGluay5vbkJsdWV0b290aEFkYXB0ZXJTdGF0ZUNoYW5nZSgnb25CbHVldG9vdGhBZGFwdGVyU3RhdGVDaGFuZ2VDYWxsQmFjaycpOwoKICAgICAgd2luZG93Lm9uQmx1ZXRvb3RoQWRhcHRlclN0YXRlQ2hhbmdlQ2FsbEJhY2sgPSBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgcmVzID0gSlNPTi5wYXJzZShyZXMpOwogICAgICAgIGNvbnNvbGUubG9nKCcgNC7nm5HlkKzov57mjqXorr7lpIfnu5PmnpwnLCByZXMpOwogICAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5jcmVhdGVCTEVDb25uZWN0aW9uICYmIHdpbmRvdy5oaWxpbmsuY3JlYXRlQkxFQ29ubmVjdGlvbihfdGhpczQuZGV2aWNlSWQpOwoKICAgICAgICBpZiAocmVzLmF2YWlsYWJsZSkgewogICAgICAgICAgX3RoaXM0LmdldEN1cnJlbnRSZWdpc3RlcmVkRGV2aWNlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzNC5vcGVuQmx1ZXRvb3RoQWRhcHRlcigpOyAvLyDok53niZnmnKrmiZPlvIAKCgogICAgICAgICAgX3RoaXM0LnNlYXJjaERldmljZXMoKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9LAoKICAgIC8qKg0KICAgICAgICAgICAgKiBAZGVzY3JpcHRpb246IC8vIOmAmuefpeS4iuWxgg0KICAgICAgICAgICAgKiBAcGFyYW0geyp9DQogICAgICAgICAgICAqIEByZXR1cm4geyp9DQogICAgICAgICAgICAqLwogICAgb25CTEVTZXJ2aWNlc0Rpc2NvdmVyZWQ6IGZ1bmN0aW9uIG9uQkxFU2VydmljZXNEaXNjb3ZlcmVkKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBzdGF0dXM7CgogICAgICB3aW5kb3cub25CTEVTZXJ2aWNlc0Rpc2NvdmVyZWRDYWxsYmFjayA9IGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAod2luZG93LmlvcykgewogICAgICAgICAgaWYgKHJlcyA9PSAwKSB7CiAgICAgICAgICAgIHN0YXR1cyA9IHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5ub3RpZnlCTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2hhbmdlICYmIHdpbmRvdy5oaWxpbmsubm90aWZ5QkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNoYW5nZSh0aGF0LmRldmljZUlkLCB0aGF0LnNlcnZpY2VJZCwgdGhhdC5yZWFkQ2hhcmFjdGVyaXN0aWNJZCwgdHJ1ZSk7CgogICAgICAgICAgICBpZiAoc3RhdHVzID09PSAwKSB7CiAgICAgICAgICAgICAgLy/nm5HlkKzkvY7lip/ogJfok53niZnorr7lpIfnmoTnibnlvoHlgLzlj5jljJYKICAgICAgICAgICAgICB0aGF0Lm9uQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNoYW5nZSgpOyAvL3RoYXQud3JpdGVEYXRhKCc1NScpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShyZXMpOwoKICAgICAgICAgIGlmIChkYXRhLmVyckNvZGUgPT09IDApIHsKICAgICAgICAgICAgd2luZG93LnQzID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgICAgIHN0YXR1cyA9IHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5ub3RpZnlCTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2hhbmdlICYmIHdpbmRvdy5oaWxpbmsubm90aWZ5QkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNoYW5nZSh0aGF0LmRldmljZUlkLCB0aGF0LnNlcnZpY2VJZCwgdGhhdC5yZWFkQ2hhcmFjdGVyaXN0aWNJZCwgdHJ1ZSk7CgogICAgICAgICAgICBpZiAoc3RhdHVzID09PSAwKSB7CiAgICAgICAgICAgICAgdGhhdC5vbkJMRUNoYXJhY3RlcmlzdGljVmFsdWVDaGFuZ2UoKTsgLy8gdGhhdC53cml0ZURhdGEoJzU1Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsub25CTEVTZXJ2aWNlc0Rpc2NvdmVyZWQgJiYgd2luZG93LmhpbGluay5vbkJMRVNlcnZpY2VzRGlzY292ZXJlZCgib25CTEVTZXJ2aWNlc0Rpc2NvdmVyZWRDYWxsYmFjayIpOwogICAgfSwKCiAgICAvKioNCiAgICAgICAgICogQGRlc2NyaXB0aW9uOiAvL+ebkeWQrOS9juWKn+iAl+iTneeJmeiuvuWkh+eahOeJueW+geWAvOWPmOWMlg0KICAgICAgICAgKiBAcGFyYW0geyp9DQogICAgICAgICAqIEByZXR1cm4geyp9DQogICAgICAgICAqLwogICAgb25CTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2hhbmdlOiBmdW5jdGlvbiBvbkJMRUNoYXJhY3RlcmlzdGljVmFsdWVDaGFuZ2UoKSB7CiAgICAgIHdpbmRvdy5vbkJMRUNoYXJhY3RlcmlzdGljVmFsdWVDaGFuZ2VDYWxsYmFjayA9IGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShyZXMpOyAvLyB0aGlzLmhpc3RvcnlMb2cgKz0gcmVzdWx0LmRhdGE7CiAgICAgICAgLy8gdGhpcy5hY2NlcHRUeXBlNThEYXRhKHRoaXMuaGlzdG9yeUxvZykKICAgICAgICAvLyB0aGlzLmFjY2VwdFR5cGU1NURhdGEodGhpcy5oaXN0b3J5TG9nKQogICAgICB9OwoKICAgICAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLm9uQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNoYW5nZSAmJiB3aW5kb3cuaGlsaW5rLm9uQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNoYW5nZSgib25CTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2hhbmdlQ2FsbGJhY2siKTsKICAgIH0sCgogICAgLyoqDQogICAgICAgICAgKiBAZGVzY3JpcHRpb246IOaQnOe0ouiTneeJmeiuvuWkhw0KICAgICAgICAgICogQHBhcmFtIHsqfQ0KICAgICAgICAgICogQHJldHVybiB7Kn0NCiAgICAgICAgICAqLwogICAgc2VhcmNoRGV2aWNlczogZnVuY3Rpb24gc2VhcmNoRGV2aWNlcygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgXyA9IHRoaXM7CgogICAgICB3aW5kb3cub25CbHVldG9vdGhEZXZpY2VGb3VuZENhbGxiYWNrID0gZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBkYXRhOwoKICAgICAgICBpZiAod2luZG93LmlvcykgewogICAgICAgICAgZGF0YSA9IF8uZ2V0SU9TRGV2aWQocmVzKTsKCiAgICAgICAgICBpZiAoX3RoaXM1LmRldmljZUlkID09IGRhdGEuZGV2aWNlSWQpIHsKICAgICAgICAgICAgLy8gaW9zCiAgICAgICAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5jcmVhdGVCTEVDb25uZWN0aW9uICYmIHdpbmRvdy5oaWxpbmsuY3JlYXRlQkxFQ29ubmVjdGlvbihkYXRhLmRldmljZUlkKTsKICAgICAgICAgICAgd2luZG93LmhpbGluayAmJiB3aW5kb3cuaGlsaW5rLnN0b3BCbHVldG9vdGhEZXZpY2VzRGlzY292ZXJ5ICYmIHdpbmRvdy5oaWxpbmsuc3RvcEJsdWV0b290aERldmljZXNEaXNjb3ZlcnkoKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKF90aGlzNS5kZXZpY2VJZCA9PSBKU09OLnBhcnNlKHJlcylbMF0uZGV2aWNlSWQpIHsKICAgICAgICAgICAgLy8g5a6J5Y2TCiAgICAgICAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5jcmVhdGVCTEVDb25uZWN0aW9uICYmIHdpbmRvdy5oaWxpbmsuY3JlYXRlQkxFQ29ubmVjdGlvbihfdGhpczUuZGV2aWNlSWQpOwogICAgICAgICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsuc3RvcEJsdWV0b290aERldmljZXNEaXNjb3ZlcnkgJiYgd2luZG93LmhpbGluay5zdG9wQmx1ZXRvb3RoRGV2aWNlc0Rpc2NvdmVyeSgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5vbkJsdWV0b290aERldmljZUZvdW5kICYmIHdpbmRvdy5oaWxpbmsub25CbHVldG9vdGhEZXZpY2VGb3VuZCgib25CbHVldG9vdGhEZXZpY2VGb3VuZENhbGxiYWNrIik7CgogICAgICBpZiAod2luZG93LmlvcykgewogICAgICAgIHdpbmRvdy5oaWxpbmsgJiYgd2luZG93LmhpbGluay5zdGFydEJsdWV0b290aERldmljZXNEaXNjb3ZlcnkgJiYgd2luZG93LmhpbGluay5zdGFydEJsdWV0b290aERldmljZXNEaXNjb3ZlcnkoW10sIGZhbHNlLCAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsuc3RhcnRCbHVldG9vdGhEZXZpY2VzRGlzY292ZXJ5ICYmIHdpbmRvdy5oaWxpbmsuc3RhcnRCbHVldG9vdGhEZXZpY2VzRGlzY292ZXJ5KFtdLCB0cnVlLCAxKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb246IOino+aekGlvcyBkZXZJRA0KICAgICAqIEBwYXJhbSB7Kn0NCiAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAqLwogICAgZ2V0SU9TRGV2aWQ6IGZ1bmN0aW9uIGdldElPU0RldmlkKHJlcykgewogICAgICB2YXIgZGF0YSA9IHVuZGVmaW5lZDsKICAgICAgdmFyIGRhdGFTdHIgPSByZXM7CiAgICAgIGRhdGFTdHIgPSBkYXRhU3RyLnJlcGxhY2UoLyJ7L2csICd7Jyk7CiAgICAgIGRhdGFTdHIgPSBkYXRhU3RyLnJlcGxhY2UoL30iL2csICd9Jyk7CiAgICAgIGRhdGFTdHIgPSBkYXRhU3RyLnJlcGxhY2UoL1xcfFxufFxyfFx0fFxmfFx0L2csICcnKTsKICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cik7CiAgICAgIHJldHVybiBkYXRhOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb246ICDok53niZnorr7lpIfmk43mjqfvvJrlr7nok53niZnorr7lpIflj5HpgIHmlbDmja4NCiAgICAgKiBAcGFyYW0geyp9DQogICAgICogQHJldHVybiB7Kn0NCiAgICAgKi8KICAgIHdyaXRlRGF0YTogZnVuY3Rpb24gd3JpdGVEYXRhKGRhdGEpIHsKICAgICAgLy8gaWYgKGRhdGEgPT09ICc1NycgfHwgZGF0YSA9PT0gJzU5JykgewogICAgICAvLyAgICAgd2luZG93LnR5cGU1OCA9IHRydWU7CiAgICAgIC8vICAgICB3aW5kb3cudHlwZTU1ID0gZmFsc2U7CiAgICAgIC8vIH0gZWxzZSB7CiAgICAgIC8vICAgICB3aW5kb3cudHlwZTU4ID0gZmFsc2U7CiAgICAgIC8vICAgICB3aW5kb3cudHlwZTU1ID0gdHJ1ZTsKICAgICAgLy8gfQogICAgICAvLy8vY29uc29sZS5sb2coJ+iTneeJmeiuvuWkh+aTjeaOp++8muWvueiTneeJmeiuvuWkh+WPkemAgeaVsOaNricpOwogICAgICB3aW5kb3cuaGlsaW5rICYmIHdpbmRvdy5oaWxpbmsud3JpdGVCTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlICYmIHdpbmRvdy5oaWxpbmsud3JpdGVCTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlKHRoaXMuZGV2aWNlSWQsIHRoaXMuc2VydmljZUlkLCB0aGlzLndyaXRlQ2hhcmFjdGVyaXN0aWNJZCwgZGF0YSwgIndyaXRlQkxFQ2hhcmFjdGVyaXN0aWNWYWx1ZUNhbGxCYWNrIik7CgogICAgICB3aW5kb3cud3JpdGVCTEVDaGFyYWN0ZXJpc3RpY1ZhbHVlQ2FsbEJhY2sgPSBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIHJlc1ZhbCA9IEpTT04ucGFyc2UocmVzKTsKICAgICAgfTsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["E:/OMROM/A6/AleBrush/src/mixins/bleConnect.js"],"names":["mapActions","g","data","deviceId","serviceId","writeCharacteristicId","readCharacteristicId","bleConnected","historyLog","initGetData58","mounted","onBLEConnectionStateChange","onBluetoothAdapterStateChange","getBluetoothAdapterState","openBluetoothAdapter","computed","connected","$store","state","BleStatus","methods","call_update_bleConnected","window","hilink","getBluetoothAdapterStateCallback","res","JSON","parse","available","console","log","getCurrentRegisteredDevice","searchDevices","getCurrentRegisteredDeviceCallBack","ios","getIOSDevid","devId","createBLEConnection","onBLEConnectionStateChangeCallBack","onBLEServicesDiscovered","onBLECharacteristicValueChange","onBluetoothAdapterStateChangeCallBack","that","status","onBLEServicesDiscoveredCallback","notifyBLECharacteristicValueChange","errCode","t3","Date","getTime","onBLECharacteristicValueChangeCallback","result","_","onBluetoothDeviceFoundCallback","stopBluetoothDevicesDiscovery","onBluetoothDeviceFound","startBluetoothDevicesDiscovery","undefined","dataStr","replace","writeData","writeBLECharacteristicValue","writeBLECharacteristicValueCallBack","resVal"],"mappings":";;;;AAAA;;;;;;;;AAQA,SAASA,UAAT,QAA2B,MAA3B;AACA,OAAOC,CAAP,MAAc,gBAAd;AACA,eAAe;AACXC,EAAAA,IADW,kBACJ;AACH,WAAO;AACLC,MAAAA,QAAQ,EAAE,IADL;AAELC,MAAAA,SAAS,EAAE,sCAFN;AAGLC,MAAAA,qBAAqB,EAAE,sCAHlB;AAILC,MAAAA,oBAAoB,EAAE,sCAJjB;AAKLC,MAAAA,YAAY,EAAE,EALT;AAMLC,MAAAA,UAAU,EAAE,EANP;AAOLC,MAAAA,aAAa,EAAE;AAPV,KAAP;AASH,GAXU;AAYXC,EAAAA,OAZW,qBAYD;AACR,SAAKC,0BAAL;AACA,SAAKC,6BAAL;AACA,SAAKC,wBAAL;AACA,SAAKC,oBAAL;AACD,GAjBU;AAkBXC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,SADQ,uBACI;AAAG;AACX,aAAO,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,SAAlB,CAA4BZ,YAAnC;AACH;AAHO,GAlBC;AAuBVa,EAAAA,OAAO,kCACHpB,UAAU,CAAC;AACZqB,IAAAA,wBAAwB,EAAE;AADd,GAAD,CADP;AAIL;;;;;AAKCR,IAAAA,wBATI,sCASuB;AAAA;;AACzBS,MAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcV,wBAA/B,IAA2DS,MAAM,CAACC,MAAP,CAAcV,wBAAd,CACvD,kCADuD,CAA3D;;AAGAS,MAAAA,MAAM,CAACE,gCAAP,GAA0C,UAACC,GAAD,EAAS;AAC/C,YAAIvB,IAAI,GAAGwB,IAAI,CAACC,KAAL,CAAWF,GAAX,CAAX;;AACA,YAAIvB,IAAI,CAAC0B,SAAT,EAAoB;AAChBC,UAAAA,OAAO,CAACC,GAAR,CAAY5B,IAAI,CAAC0B,SAAjB;;AACA,UAAA,KAAI,CAACG,0BAAL;;AACA,UAAA,KAAI,CAACC,aAAL;AACH,SAJD,MAIO;AACHH,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACH;AACJ,OATD;AAUH,KAvBK;;AAwBJ;;;;;AAKChB,IAAAA,oBA7BG,kCA6BoB;AACtBQ,MAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcT,oBAA/B,IAAuDQ,MAAM,CAACC,MAAP,CAAcT,oBAAd,EAAvD;AACH,KA/BK;;AAiCN;;;;;AAKAiB,IAAAA,0BAtCM,wCAsCuB;AAAA;;AACzB;AACAT,MAAAA,MAAM,CAACW,kCAAP,GAA4C,UAAAR,GAAG,EAAI;AAC/C;AACA,YAAIvB,IAAJ;;AACA,YAAIoB,MAAM,CAACY,GAAX,EAAgB;AACZhC,UAAAA,IAAI,GAAG,MAAI,CAACiC,WAAL,CAAiBV,GAAjB,CAAP;AACH,SAFD,MAEO;AACHvB,UAAAA,IAAI,GAAGwB,IAAI,CAACC,KAAL,CAAWF,GAAX,CAAP;AACH;;AACD,QAAA,MAAI,CAACtB,QAAL,GAAgBD,IAAI,CAACC,QAArB;AACAmB,QAAAA,MAAM,CAACc,KAAP,GAAelC,IAAI,CAACC,QAApB;AACAmB,QAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcc,mBAA/B,IAAsDf,MAAM,CAACC,MAAP,CAAcc,mBAAd,CAAkC,MAAI,CAAClC,QAAvC,CAAtD;AACH,OAXD;;AAYAmB,MAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcQ,0BAA/B,IAA6DT,MAAM,CAACC,MAAP,CAAcQ,0BAAd,CAAyC,oCAAzC,CAA7D;AACH,KArDK;;AAsDP;;;;;AAKCpB,IAAAA,0BA3DM,wCA2DuB;AAAA;;AAC3BW,MAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcZ,0BAA/B,IAA6DW,MAAM,CAACC,MAAP,CAAcZ,0BAAd,CAAyC,oCAAzC,CAA7D;;AACAW,MAAAA,MAAM,CAACgB,kCAAP,GAA4C,UAAAb,GAAG,EAAI;AAC/CA,QAAAA,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWF,GAAX,CAAN;;AACA,YAAIA,GAAG,CAACT,SAAR,EAAmB;AACf,UAAA,MAAI,CAACK,wBAAL,CAA8B,IAA9B,EADe,CAEf;;;AACA,UAAA,MAAI,CAACkB,uBAAL,GAHe,CAIf;;;AACA,UAAA,MAAI,CAACC,8BAAL;AAEH,SAPD,MAOO;AACH;AACA,UAAA,MAAI,CAACR,aAAL;;AACA,UAAA,MAAI,CAACX,wBAAL,CAA8B,KAA9B;AACH;AACJ,OAdD;AAeH,KA5EO;;AA6EP;;;;;AAKCT,IAAAA,6BAlFM,2CAkF0B;AAAA;;AAC9BU,MAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcX,6BAA/B,IAAgEU,MAAM,CAACC,MAAP,CAAcX,6BAAd,CAA4C,uCAA5C,CAAhE;;AACAU,MAAAA,MAAM,CAACmB,qCAAP,GAA+C,UAAAhB,GAAG,EAAI;AAClDA,QAAAA,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWF,GAAX,CAAN;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BL,GAA3B;AACAH,QAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcc,mBAA/B,IAAsDf,MAAM,CAACC,MAAP,CAAcc,mBAAd,CAAkC,MAAI,CAAClC,QAAvC,CAAtD;;AACA,YAAIsB,GAAG,CAACG,SAAR,EAAmB;AACf,UAAA,MAAI,CAACG,0BAAL;AACH,SAFD,MAEO;AACH,UAAA,MAAI,CAACjB,oBAAL,GADG,CAEH;;;AACA,UAAA,MAAI,CAACkB,aAAL;AACH;AACJ,OAXD;AAYH,KAhGO;;AAiGX;;;;;AAKCO,IAAAA,uBAtGU,qCAsGgB;AACxB,UAAIG,IAAI,GAAG,IAAX;AACA,UAAIC,MAAJ;;AACArB,MAAAA,MAAM,CAACsB,+BAAP,GAAyC,UAAAnB,GAAG,EAAI;AAC5C,YAAIH,MAAM,CAACY,GAAX,EAAgB;AACZ,cAAIT,GAAG,IAAI,CAAX,EAAc;AACVkB,YAAAA,MAAM,GAAGrB,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcsB,kCAA/B,IAAqEvB,MAAM,CAACC,MAAP,CAAcsB,kCAAd,CAC1EH,IAAI,CAACvC,QADqE,EAE1EuC,IAAI,CAACtC,SAFqE,EAG1EsC,IAAI,CAACpC,oBAHqE,EAI1E,IAJ0E,CAA9E;;AAMA,gBAAIqC,MAAM,KAAK,CAAf,EAAkB;AACd;AACAD,cAAAA,IAAI,CAACF,8BAAL,GAFc,CAGd;AACH;AACJ;AACJ,SAdD,MAcO;AACH,cAAItC,IAAI,GAAGwB,IAAI,CAACC,KAAL,CAAWF,GAAX,CAAX;;AACA,cAAIvB,IAAI,CAAC4C,OAAL,KAAiB,CAArB,EAAwB;AACpBxB,YAAAA,MAAM,CAACyB,EAAP,GAAY,IAAIC,IAAJ,GAAWC,OAAX,EAAZ;AACAN,YAAAA,MAAM,GAAGrB,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcsB,kCAA/B,IAAqEvB,MAAM,CAACC,MAAP,CAAcsB,kCAAd,CAC1EH,IAAI,CAACvC,QADqE,EAE1EuC,IAAI,CAACtC,SAFqE,EAG1EsC,IAAI,CAACpC,oBAHqE,EAI1E,IAJ0E,CAA9E;;AAMA,gBAAIqC,MAAM,KAAK,CAAf,EAAkB;AACdD,cAAAA,IAAI,CAACF,8BAAL,GADc,CAEf;AACF;AACJ;AACJ;AACJ,OA/BD;;AAgCAlB,MAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcgB,uBAA/B,IAA0DjB,MAAM,CAACC,MAAP,CAAcgB,uBAAd,CAAsC,iCAAtC,CAA1D;AACA,KA1IQ;;AA2IR;;;;;AAKCC,IAAAA,8BAhJO,4CAgJ0B;AAChClB,MAAAA,MAAM,CAAC4B,sCAAP,GAAgD,UAAAzB,GAAG,EAAI;AACnD,YAAI0B,MAAM,GAAGzB,IAAI,CAACC,KAAL,CAAWF,GAAX,CAAb,CADmD,CAEpD;AACA;AACA;AACF,OALD;;AAMAH,MAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAciB,8BAA/B,IAAiElB,MAAM,CAACC,MAAP,CAAciB,8BAAd,CAA6C,wCAA7C,CAAjE;AACH,KAxJS;;AAyJT;;;;;AAKCR,IAAAA,aA9JQ,2BA8JQ;AAAA;;AACd,UAAIoB,CAAC,GAAG,IAAR;;AACA9B,MAAAA,MAAM,CAAC+B,8BAAP,GAAwC,UAAC5B,GAAD,EAAS;AAC7C,YAAIvB,IAAJ;;AACA,YAAIoB,MAAM,CAACY,GAAX,EAAgB;AACZhC,UAAAA,IAAI,GAAGkD,CAAC,CAACjB,WAAF,CAAcV,GAAd,CAAP;;AACA,cAAI,MAAI,CAACtB,QAAL,IAAiBD,IAAI,CAACC,QAA1B,EAAoC;AAAG;AACnCmB,YAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcc,mBAA/B,IAAsDf,MAAM,CAACC,MAAP,CAAcc,mBAAd,CAAkCnC,IAAI,CAACC,QAAvC,CAAtD;AACAmB,YAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAc+B,6BAA/B,IAAgEhC,MAAM,CAACC,MAAP,CAAc+B,6BAAd,EAAhE;AACH;AACJ,SAND,MAMO;AACH,cAAI,MAAI,CAACnD,QAAL,IAAiBuB,IAAI,CAACC,KAAL,CAAWF,GAAX,EAAgB,CAAhB,EAAmBtB,QAAxC,EAAkD;AAAG;AACjDmB,YAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcc,mBAA/B,IAAsDf,MAAM,CAACC,MAAP,CAAcc,mBAAd,CAAkC,MAAI,CAAClC,QAAvC,CAAtD;AACAmB,YAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAc+B,6BAA/B,IAAgEhC,MAAM,CAACC,MAAP,CAAc+B,6BAAd,EAAhE;AACH;AACJ;AACJ,OAdD;;AAeAhC,MAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcgC,sBAA/B,IAAyDjC,MAAM,CAACC,MAAP,CAAcgC,sBAAd,CAAqC,gCAArC,CAAzD;;AACA,UAAIjC,MAAM,CAACY,GAAX,EAAgB;AACZZ,QAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAciC,8BAA/B,IAAiElC,MAAM,CAACC,MAAP,CAAciC,8BAAd,CAA6C,EAA7C,EAAiD,KAAjD,EAAwD,CAAxD,CAAjE;AACH,OAFD,MAEO;AACHlC,QAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAciC,8BAA/B,IAAiElC,MAAM,CAACC,MAAP,CAAciC,8BAAd,CAA6C,EAA7C,EAAiD,IAAjD,EAAuD,CAAvD,CAAjE;AACH;AACD,KArLM;;AAsLV;;;;;AAKCrB,IAAAA,WA3LS,uBA2LGV,GA3LH,EA2LQ;AACd,UAAIvB,IAAI,GAAGuD,SAAX;AACA,UAAIC,OAAO,GAAGjC,GAAd;AACAiC,MAAAA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,CAAV;AACAD,MAAAA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,CAAV;AACAD,MAAAA,OAAO,GAAGA,OAAO,CAACC,OAAR,CAAgB,oBAAhB,EAAsC,EAAtC,CAAV;AACAzD,MAAAA,IAAI,GAAGwB,IAAI,CAACC,KAAL,CAAW+B,OAAX,CAAP;AACA,aAAOxD,IAAP;AACF,KAnMQ;;AAoMZ;;;;;AAKC0D,IAAAA,SAzMW,qBAyMD1D,IAzMC,EAyMK;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAoB,MAAAA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcsC,2BAA/B,IAA8DvC,MAAM,CAACC,MAAP,CAAcsC,2BAAd,CAC1D,KAAK1D,QADqD,EAE1D,KAAKC,SAFqD,EAG1D,KAAKC,qBAHqD,EAI1DH,IAJ0D,EAK1D,qCAL0D,CAA9D;;AAOAoB,MAAAA,MAAM,CAACwC,mCAAP,GAA6C,UAACrC,GAAD,EAAS;AAClD,YAAIsC,MAAM,GAAGrC,IAAI,CAACC,KAAL,CAAWF,GAAX,CAAb;AACH,OAFD;AAGD;AA5NW;AAvBG,CAAf","sourcesContent":["/*\r\n * @Author: your name\r\n * @Date: 2021-02-04 14:13:29\r\n * @LastEditTime: 2021-03-23 15:14:51\r\n * @LastEditors: Please set LastEditors\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\brood-pressure-demo\\src\\mixins\\bleConnect.js\r\n */\r\nimport { mapActions } from 'vuex'\r\nimport g from '../utils/index';\r\nexport default {\r\n    data() {\r\n        return {\r\n          deviceId: null,\r\n          serviceId: \"0000ffb0-0000-1000-8000-00805f9b34fb\",\r\n          writeCharacteristicId: \"0000ffb1-0000-1000-8000-00805f9b34fb\",\r\n          readCharacteristicId: \"0000ffb2-0000-1000-8000-00805f9b34fb\",\r\n          bleConnected: '',\r\n          historyLog: '',\r\n          initGetData58: true,\r\n        }\r\n    },\r\n    mounted() {\r\n      this.onBLEConnectionStateChange();\r\n      this.onBluetoothAdapterStateChange();\r\n      this.getBluetoothAdapterState();\r\n      this.openBluetoothAdapter()\r\n    },\r\n    computed: {\r\n      connected() {  //已连接\r\n          return this.$store.state.BleStatus.bleConnected\r\n      }\r\n     },\r\n     methods: {\r\n      ...mapActions({\r\n        call_update_bleConnected: 'call_update_bleConnected',\r\n      }),\r\n       /**\r\n         * @description: 蓝牙连接第一步 获取设备蓝牙模块状态\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n        getBluetoothAdapterState() {\r\n          window.hilink && window.hilink.getBluetoothAdapterState && window.hilink.getBluetoothAdapterState(\r\n              \"getBluetoothAdapterStateCallback\"\r\n          );\r\n          window.getBluetoothAdapterStateCallback = (res) => {\r\n              let data = JSON.parse(res);\r\n              if (data.available) {\r\n                  console.log(data.available)\r\n                  this.getCurrentRegisteredDevice();\r\n                  this.searchDevices()\r\n              } else {\r\n                  console.log('555');\r\n              }\r\n          }\r\n      },\r\n        /**\r\n         * @description: 打开蓝牙\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n         openBluetoothAdapter() {\r\n          window.hilink && window.hilink.openBluetoothAdapter && window.hilink.openBluetoothAdapter();\r\n      },\r\n\r\n      /**\r\n       * @description: 去注册设备 第二步\r\n       * @param {*}\r\n       * @return {*}\r\n       */\r\n      getCurrentRegisteredDevice() {\r\n          // 注册前先监听发现设备\r\n          window.getCurrentRegisteredDeviceCallBack = res => {\r\n              //console.log('注册前先监听发现设备', res);\r\n              let data;\r\n              if (window.ios) {\r\n                  data = this.getIOSDevid(res)\r\n              } else {\r\n                  data = JSON.parse(res)\r\n              }\r\n              this.deviceId = data.deviceId;\r\n              window.devId = data.deviceId;\r\n              window.hilink && window.hilink.createBLEConnection && window.hilink.createBLEConnection(this.deviceId)\r\n          }\r\n          window.hilink && window.hilink.getCurrentRegisteredDevice && window.hilink.getCurrentRegisteredDevice('getCurrentRegisteredDeviceCallBack')\r\n      },\r\n     /**\r\n         * @description: 监听连接设备结果\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n      onBLEConnectionStateChange() {\r\n        window.hilink && window.hilink.onBLEConnectionStateChange && window.hilink.onBLEConnectionStateChange('onBLEConnectionStateChangeCallBack')\r\n        window.onBLEConnectionStateChangeCallBack = res => {\r\n            res = JSON.parse(res)\r\n            if (res.connected) {\r\n                this.call_update_bleConnected(true)\r\n                // 通知上层\r\n                this.onBLEServicesDiscovered()\r\n                //监听低功耗蓝牙设备的特征值变化\r\n                this.onBLECharacteristicValueChange()\r\n\r\n            } else {\r\n                // 连接不成功 重新连接\r\n                this.searchDevices()\r\n                this.call_update_bleConnected(false)\r\n            }\r\n        }\r\n    },\r\n     /**\r\n         * @description: 监听蓝牙是否打开\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n      onBluetoothAdapterStateChange() {\r\n        window.hilink && window.hilink.onBluetoothAdapterStateChange && window.hilink.onBluetoothAdapterStateChange('onBluetoothAdapterStateChangeCallBack')\r\n        window.onBluetoothAdapterStateChangeCallBack = res => {\r\n            res = JSON.parse(res);\r\n            console.log(' 4.监听连接设备结果', res);\r\n            window.hilink && window.hilink.createBLEConnection && window.hilink.createBLEConnection(this.deviceId)\r\n            if (res.available) {\r\n                this.getCurrentRegisteredDevice()\r\n            } else {\r\n                this.openBluetoothAdapter()\r\n                // 蓝牙未打开\r\n                this.searchDevices()\r\n            }\r\n        }\r\n    },\r\n /**\r\n         * @description: // 通知上层\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n  onBLEServicesDiscovered() {\r\n    let that = this;\r\n    let status;\r\n    window.onBLEServicesDiscoveredCallback = res => {\r\n        if (window.ios) {\r\n            if (res == 0) {\r\n                status = window.hilink && window.hilink.notifyBLECharacteristicValueChange && window.hilink.notifyBLECharacteristicValueChange(\r\n                    that.deviceId,\r\n                    that.serviceId,\r\n                    that.readCharacteristicId,\r\n                    true\r\n                );\r\n                if (status === 0) {\r\n                    //监听低功耗蓝牙设备的特征值变化\r\n                    that.onBLECharacteristicValueChange();\r\n                    //that.writeData('55');\r\n                }\r\n            }\r\n        } else {\r\n            let data = JSON.parse(res);\r\n            if (data.errCode === 0) {\r\n                window.t3 = new Date().getTime()\r\n                status = window.hilink && window.hilink.notifyBLECharacteristicValueChange && window.hilink.notifyBLECharacteristicValueChange(\r\n                    that.deviceId,\r\n                    that.serviceId,\r\n                    that.readCharacteristicId,\r\n                    true\r\n                );\r\n                if (status === 0) {\r\n                    that.onBLECharacteristicValueChange();\r\n                   // that.writeData('55');\r\n                }\r\n            }\r\n        }\r\n    }\r\n    window.hilink && window.hilink.onBLEServicesDiscovered && window.hilink.onBLEServicesDiscovered(\"onBLEServicesDiscoveredCallback\")\r\n   },\r\n    /**\r\n         * @description: //监听低功耗蓝牙设备的特征值变化\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n     onBLECharacteristicValueChange() {\r\n      window.onBLECharacteristicValueChangeCallback = res => {\r\n          let result = JSON.parse(res);\r\n         // this.historyLog += result.data;\r\n         // this.acceptType58Data(this.historyLog)\r\n         // this.acceptType55Data(this.historyLog)\r\n      }\r\n      window.hilink && window.hilink.onBLECharacteristicValueChange && window.hilink.onBLECharacteristicValueChange(\"onBLECharacteristicValueChangeCallback\");\r\n  },\r\n   /**\r\n         * @description: 搜索蓝牙设备\r\n         * @param {*}\r\n         * @return {*}\r\n         */\r\n    searchDevices() {\r\n      let _ = this;\r\n      window.onBluetoothDeviceFoundCallback = (res) => {\r\n          let data;\r\n          if (window.ios) {\r\n              data = _.getIOSDevid(res);\r\n              if (this.deviceId == data.deviceId) {  // ios\r\n                  window.hilink && window.hilink.createBLEConnection && window.hilink.createBLEConnection(data.deviceId)\r\n                  window.hilink && window.hilink.stopBluetoothDevicesDiscovery && window.hilink.stopBluetoothDevicesDiscovery()\r\n              }\r\n          } else {\r\n              if (this.deviceId == JSON.parse(res)[0].deviceId) {  // 安卓\r\n                  window.hilink && window.hilink.createBLEConnection && window.hilink.createBLEConnection(this.deviceId)\r\n                  window.hilink && window.hilink.stopBluetoothDevicesDiscovery && window.hilink.stopBluetoothDevicesDiscovery()\r\n              }\r\n          }\r\n      }\r\n      window.hilink && window.hilink.onBluetoothDeviceFound && window.hilink.onBluetoothDeviceFound(\"onBluetoothDeviceFoundCallback\")\r\n      if (window.ios) {\r\n          window.hilink && window.hilink.startBluetoothDevicesDiscovery && window.hilink.startBluetoothDevicesDiscovery([], false, 1)\r\n      } else {\r\n          window.hilink && window.hilink.startBluetoothDevicesDiscovery && window.hilink.startBluetoothDevicesDiscovery([], true, 1)\r\n      }\r\n     },\r\n  /**\r\n   * @description: 解析ios devID\r\n   * @param {*}\r\n   * @return {*}\r\n   */\r\n   getIOSDevid(res) {\r\n      let data = undefined;\r\n      let dataStr = res;\r\n      dataStr = dataStr.replace(/\"{/g, '{');\r\n      dataStr = dataStr.replace(/}\"/g, '}');\r\n      dataStr = dataStr.replace(/\\\\|\\n|\\r|\\t|\\f|\\t/g, '');\r\n      data = JSON.parse(dataStr);\r\n      return data;\r\n   },\r\n/**\r\n * @description:  蓝牙设备操控：对蓝牙设备发送数据\r\n * @param {*}\r\n * @return {*}\r\n */\r\n writeData(data) {\r\n  // if (data === '57' || data === '59') {\r\n  //     window.type58 = true;\r\n  //     window.type55 = false;\r\n  // } else {\r\n  //     window.type58 = false;\r\n  //     window.type55 = true;\r\n  // }\r\n  ////console.log('蓝牙设备操控：对蓝牙设备发送数据');\r\n  window.hilink && window.hilink.writeBLECharacteristicValue && window.hilink.writeBLECharacteristicValue(\r\n      this.deviceId,\r\n      this.serviceId,\r\n      this.writeCharacteristicId,\r\n      data,\r\n      \"writeBLECharacteristicValueCallBack\"\r\n  );\r\n  window.writeBLECharacteristicValueCallBack = (res) => {\r\n      let resVal = JSON.parse(res);\r\n  };\r\n},\r\n\r\n\r\n  }\r\n}"]}]}